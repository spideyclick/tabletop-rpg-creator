<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>tRPG Engine</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
    <style media="screen">
      * {
        margin:0;
        padding:0;
        font-family:roboto;
      }
      body {
        background: #f1f1f1;
      }
      .card {
        background:white;
        border-radius:5px;
        box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.33);
        max-width:400px;
        max-height:800px;
        margin:15px;
        padding:15px;
      }
      .baseObject {
        background:rgba(0, 0, 0, 0.04);
        border-radius:0 0 5px 5px;
        box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.33);
        /* max-width:400px; */
        margin:0 0 15px 0;
        padding:15px;
      }
      .attributeName {
        float:left;
        color:rgba(0, 0, 0, 0.5)
      }
      .attributeContent {
        text-align: right;
      }
      .titleDiv {
        border-radius:5px 5px 0 0;
        box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.33);
        padding:10px;
      }
      .objectTitle {
        color:white;
        display:inline-block;
        margin-right: 5px;
      }
      .objectCategory {
        color:rgba(255, 255, 255, 0.5);
        display:inline-block;
      }
      .titleButton {
        color:white;
        border-radius:50%;
        cursor:pointer;
        float: right;
        user-select: none;
        padding:2px;
      }
      .titleButton:hover {
        color:#ffffff00;
        background:white;
        color:black;
      }
    </style>
    <script type="text/javascript">
      function unpackObject(object, parentId) {
        var div = document.createElement('div');
        div.setAttribute('class', 'baseObject');
        div.setAttribute('id', object['id']);
        // var title = document.createElement('h2');
        // title.innerHTML=object['attributes']['Title'];
        // div.appendChild(title);
        // var description = document.createElement('p');
        // description.innerHTML=object['attributes']['Description'];
        // div.appendChild(description);
        if (parentId == 'topLevel') {
          div.style.margin='0, auto';
          document.body.appendChild(div);
        } else {
          for (var i = 0; i < Object.keys(object['attributes']).length; i++) {
            if (Object.keys(object['attributes'])[i] == 'Title') {
              var titleDiv=document.createElement('div');
              titleDiv.setAttribute('class', 'titleDiv');
              titleDiv.style.backgroundColor='#'+object['color'];
              var thisTitle=document.createElement('h2');
              thisTitle.setAttribute('class', 'objectTitle');
              thisTitle.innerHTML=object['attributes']['Title'];
              titleDiv.appendChild(thisTitle);
              var titleCategory=document.createElement('small');
              titleCategory.setAttribute('class', 'objectCategory');
              titleCategory.innerHTML=object['objectTemplate'];
              titleDiv.appendChild(titleCategory);
              var editButton=document.createElement('i');
              editButton.setAttribute('class', 'material-icons titleButton');
              editButton.innerHTML='edit';
              titleDiv.appendChild(editButton);
              var addButton=document.createElement('i');
              addButton.setAttribute('class', 'material-icons titleButton');
              addButton.innerHTML='add';
              titleDiv.appendChild(addButton);
              var removeButton=document.createElement('i');
              removeButton.setAttribute('class', 'material-icons titleButton');
              removeButton.innerHTML='remove';
              titleDiv.appendChild(removeButton);
              document.getElementById(parentId).appendChild(titleDiv);
            } else {
              var thisAttributeName=document.createElement('div');
              thisAttributeName.setAttribute('class', 'attributeName');
              thisAttributeName.innerHTML=Object.keys(object['attributes'])[i]
              div.appendChild(thisAttributeName);
              var thisAttributeContent=document.createElement('div');
              thisAttributeContent.setAttribute('class', 'attributeContent');
              thisAttributeContent.innerHTML=object['attributes'][Object.keys(object['attributes'])[i]]
              div.appendChild(thisAttributeContent);
              div.appendChild(document.createElement('br'));
            }
          }
          document.getElementById(parentId).appendChild(div);
        }
        if (object['children'].length > 0) {
          for (var i = 0; i < object['children'].length; i++) {
            unpackObject(object['children'][i], object['id'])
          }
        }
      }
      function importData() {
        data=JSON.parse("{{data}}".replace(/&#34;/g, "\""));
        unpackObject(data, 'topLevel');
      }
      window.onload=importData
    </script>
  </head>
  <body>
  </body>
</html>
